<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Events - The Littlest Homestead</title>
  <link rel="stylesheet" href="STYLE/style.css"/>
</head>
<body>
  <header>
    <img src="IMG/logo.JPG" alt="The Littlest Homestead Logo" class="logo">
    <nav>
      <ul>
        <li><a href="home.html">Home</a></li>
        <li><a href="aboutus.html">About Us</a></li>
        <li><a href="products.html">Products</a></li>
        <li><a href="events.html" class="active">Events</a></li>
        <li><a href="contactus.html">Contact</a></li>
      </ul>
    </nav>
  </header>

  <main class="events-page">
    <h1>Events Calendar</h1>

    <!-- Top image box -->
    <div class="image-box"><img src="IMG/logo.JPG"></div>

    <!-- Event display -->
    <section id="event-list">
      <p>No events added yet.</p>
    </section>

    <!-- Calendar controls -->
    <section class="calendar-controls">
      <form id="event-form">
        <label for="event-date">Date (DD/MM/YYYY):</label>
        <input type="text" id="event-date" placeholder="03/10/2025" pattern="\d{2}/\d{2}/\d{4}" required>
        <label for="event-text">Event:</label>
        <input type="text" id="event-text" placeholder="Event description..." required>
        <button type="submit">Add Event</button>
      </form>
      <button id="clear-events" class="danger-btn">Clear All Events</button>
    </section>

    <!-- Calendar display -->
    <div class="calendar">
      <div class="calendar-header">
        <button id="prev-month">&lt;</button>
        <h2 id="calendar-title"></h2>
        <button id="next-month">&gt;</button>
      </div>
      <div class="calendar-grid" id="calendar-grid"></div>
    </div>

    <!-- Middle image box -->
    <div class="image-box centered"><img src="IMG/logo.JPG" alt=""></div>

    <!-- Bottom image box -->
    <div class="image-box"><img src="IMG/IMG-20250929-WA0016.jpg" alt=""></div>

  </main>

  <footer>
    <p>&copy; 2025 The Littlest Homestead. All Rights Reserved.</p>
  </footer>

  <script>
    const eventForm = document.getElementById('event-form');
    const eventDate = document.getElementById('event-date');
    const eventText = document.getElementById('event-text');
    const eventList = document.getElementById('event-list');
    const calendarTitle = document.getElementById('calendar-title');
    const calendarGrid = document.getElementById('calendar-grid');
    const clearEventsBtn = document.getElementById('clear-events');
    const prevMonthBtn = document.getElementById('prev-month');
    const nextMonthBtn = document.getElementById('next-month');

    let events = JSON.parse(localStorage.getItem('events')) || [];
    let currentDate = new Date();

    function saveEvents() { localStorage.setItem('events', JSON.stringify(events)); }

    function renderEvents() {
      eventList.innerHTML = '';
      if(events.length===0) eventList.innerHTML='<p>No events added yet.</p>';
      else {
        events.forEach((e,index)=>{
          const div=document.createElement('div');
          div.className='event-item';
          div.innerHTML=`<strong>${e.date}</strong>: ${e.text} <button onclick="removeEvent(${index})">Remove</button>`;
          eventList.appendChild(div);
        });
      }
    }

    function removeEvent(index){ events.splice(index,1); saveEvents(); renderEvents(); renderCalendar(); }

    function renderCalendar(){
      const year=currentDate.getFullYear();
      const month=currentDate.getMonth();
      const monthName=currentDate.toLocaleString('default',{month:'long'});
      calendarTitle.textContent=`${monthName} ${year}`;
      calendarGrid.innerHTML='';
      const firstDay=new Date(year,month,1).getDay();
      const daysInMonth=new Date(year,month+1,0).getDate();
      for(let i=0;i<firstDay;i++){ const blank=document.createElement('div'); blank.className='calendar-cell empty'; calendarGrid.appendChild(blank);}
      for(let day=1;day<=daysInMonth;day++){
        const cell=document.createElement('div');
        cell.className='calendar-cell';
        cell.textContent=day;
        const dateStr=`${String(day).padStart(2,'0')}/${String(month+1).padStart(2,'0')}/${year}`;
        events.forEach(ev=>{if(ev.date===dateStr){
          const mark=document.createElement('span');
          mark.className='event-marker';
          mark.textContent='â˜…';
          mark.style.fontSize='1.5em';
          mark.style.color='#cc4b4b';
          cell.appendChild(mark);
        }});
        calendarGrid.appendChild(cell);
      }
    }

    prevMonthBtn.addEventListener('click',()=>{currentDate.setMonth(currentDate.getMonth()-1);renderCalendar();});
    nextMonthBtn.addEventListener('click',()=>{currentDate.setMonth(currentDate.getMonth()+1);renderCalendar();});
    eventForm.addEventListener('submit',e=>{e.preventDefault();events.push({date:eventDate.value,text:eventText.value}); saveEvents(); renderEvents(); renderCalendar(); eventForm.reset();});
    clearEventsBtn.addEventListener('click',()=>{if(confirm('Are you sure?')){events=[]; saveEvents(); renderEvents(); renderCalendar();}});
    renderEvents(); renderCalendar();
  </script>
</body>
</html>